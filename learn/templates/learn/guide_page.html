{% extends base_template %}

{% load static %}

{% block title %}
{% if guide %}{% if page.visible or user.is_superuser %}{{guide.guide_name}}
{% else %}Cannot Access{% endif %}
{% else %}Doesn't Exist{% endif %}
{% endblock %}

{% block content %}
	<div class="mx-auto max-w-7xl px-4 py-4 sm:px-6 lg:px-8">
        {% if guide %}
            {% if guide.visible or user.is_superuser %}
                <h1
                    class="text-text-light dark:text-text-dark text-3xl font-bold"
                    >{{guide.guide_name}}
                </h1>
                <p
                    class="text-text-light dark:text-text-dark mt-2"
                    >{{guide.description}}
                </p>
                <div class="flex flex-col mt-2">
                    {% for page in pages %}
                        <a class="red-link mt-1"
                            href="{% url 'page' page=page.url_name %}"
                            hx-get="{% url 'page' page=page.url_name %}" hx-target="main" hx-push-url="true"
                            >{{page.page_name}}</a>
                    {% empty %}
                        <p class="text-text-light mt-1 dark:text-text-dark"
                        >There are no pages at the moment.</p>
                    {% endfor %}
                </div>
            {% else %}
                <p class="text-text-light dark:text-text-dark"
                >You do not have access to this guide.</p>
            {% endif %}
        {% else %}
            <p class="text-text-light dark:text-text-dark"
            >The requested guide does not exist.</p>
        {% endif %}
    </div>
{% endblock %}
