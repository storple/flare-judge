{% extends base_template %}

{% load static %}

{% block title %}
{% if page %}{% if page.visible or user.is_superuser %}{{page.page_name}}
{% else %}Cannot Access{% endif %}
{% else %}Doesn't Exist{% endif %}
{% endblock %}


{% block styles %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css" integrity="sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs" crossorigin="anonymous" />
{{ block.super }}
{% endblock %}

{% block content %}
    <div class="mx-auto max-w-5xl px-4 py-4 sm:px-6 lg:px-8">
	{% if page %}
		{% if page.visible or user.is_superuser %}
                <h1 class="text-text-light dark:text-text-dark text-3xl font-bold mt-4 mb-8">{{page.page_name}}</h1>
				<div class="markdown">
					{% include page.html_template_name %}
				</div>
                {% if page.guide and page.guide.visible %}
                    <a
                        class="red-link"
                        href="{% url 'guide' guide=page.guide.url_name %}">Back to guide</a>
                {% endif %}
				{% comment %}
				<!-- toc -->
				{% autoescape off %}
					{{ page.toc }}
				{% endautoescape %}
				{% endcomment %}
		{% else %}
            <p class="text-text-light mt-1 dark:text-text-dark"
            >You do not have access to this page.</p>
		{% endif %}
	{% else %}
        <p class="text-text-light mt-1 dark:text-text-dark"
        >The requested page does not exist.</p>
	{% endif %}
    </div>
    {% include "learn/components/clipboard_notification.html" %}
{% endblock %}

{% block javascript %}
    {{ block.super }}
    <script src="{% static 'vendored/clipboard.min.js' %}" defer></script>
    <script src="{% static 'learn/clipboard.js' %}" defer></script>
{% endblock %}
